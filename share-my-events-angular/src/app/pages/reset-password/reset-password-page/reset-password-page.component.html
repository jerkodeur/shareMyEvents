<form
  [formGroup]="pwdForm"
  (ngSubmit)="onSubmit()"
  novalidate
  class="main-form-layout"
>
  <fieldset>
    <legend class="w-auto px-2">
      <h1>Réinitialiser le mot de passe</h1>
    </legend>
    <div class="required">* Champs obligatoires</div>
    <div class="form-group">
      <label for="email" class="form-label"
        >E-mail <span class="text-blood">*</span></label
      >
      <input
        type="email"
        name="email"
        id="email"
        placeholder="mon-email@gmail.com"
        class="form-control"
        aria-required
        formControlName="email"
        autocomplete="email"
      />
      <div
        class="error-feedback"
        *ngIf="
          submitted &&
          pwdForm.controls['email'].errors?.['required']
        "
      >
        * Vous devez renseigner une adresse e-email.
      </div>
      <div
        class="error-feedback"
        *ngIf="
          submitted && (pwdForm.controls['email'].errors?.['pattern'])
        "
      >
        * Le format de l'adresse e-mail est invalide.
      </div>
    </div>
    <div class="form-group">
      <label for="oldPassword" class="form-label"
        >Mot de passe temporaire reçu par mail<span class="text-blood"
          >*</span
        ></label
      >
      <div class="form-icon">
        <input
          [type]="oldPwdShow ? 'texte' : 'password'"
          name="oldPassword"
          id="oldPassword"
          placeholder="Entrez le mot de passe temporaire"
          class="form-control"
          aria-required
          formControlName="oldPassword"
          autocomplete="oldPassword"
        />
        <fa-icon
          [icon]="oldPwdShow ? faEyeSlash : faEye"
          size="xs"
          (click)="toggleOldPwdType()"
        ></fa-icon>
      </div>
      <div
        class="error-feedback"
        *ngIf="
          submitted &&
          pwdForm.controls['oldPassword'].errors &&
          pwdForm.controls['oldPassword'].errors['required']
        "
      >
        * Vous devez renseigner le mot de passe temporaire que vous avez reçu
        par e-mail.
      </div>
    </div>
    <div class="form-group">
      <label for="password" class="form-label" aria-required
        >Nouveau mot de passe <span class="text-blood">*</span></label
      >
      <div class="form-icon">
        <input
          [type]="pwdShow ? 'texte' : 'password'"
          name="password"
          id="password"
          placeholder="Choisissez un nouveau mot de passe"
          class="form-control"
          aria-required
          formControlName="password"
          aria-describedby="pwdHelp"
        />
        <fa-icon
          [icon]="pwdShow ? faEyeSlash : faEye"
          size="xs"
          (click)="togglePwdType()"
        ></fa-icon>
      </div>
      <div id="pwdHelp" class="form-text">
        Le mot de passe doit contenir au minimum 8 caractères, 1 majuscule, 1
        minuscule, et 1 caractère spécial.
      </div>
      <div
        class="error-feedback"
        *ngIf="
          submitted &&
          pwdForm.controls['password'].errors &&
          pwdForm.controls['password'].errors['required']
        "
      >
        * Vous devez renseigner un mot de passe.
      </div>
      <div
        class="error-feedback"
        *ngIf="
          submitted &&
          pwdForm.controls['password'].errors &&
          pwdForm.controls['password'].errors['pattern']
        "
      >
        * Le format du mot de passe n'est pas correct.
      </div>
    </div>
    <div class="form-group">
      <label for="confirm_password" class="form-label"
        >Confirmation du mot de passe <span class="text-blood">*</span></label
      >
      <div class="form-icon">
        <input
          [type]="cfPwdShow ? 'texte' : 'password'"
          name="confirm_password"
          id="confirm_password"
          placeholder="Confirmer votre mot de passe"
          class="form-control"
          aria-required
          formControlName="confirm_password"
        />
        <fa-icon
          [icon]="cfPwdShow ? faEyeSlash : faEye"
          size="xs"
          (click)="toggleCfPwdType()"
        ></fa-icon>
      </div>
      <div
        class="error-feedback"
        *ngIf="
          submitted &&
          !pwdForm.controls['password'].errors &&
          pwdForm.controls['confirm_password'].errors &&
          pwdForm.controls['confirm_password'].errors['matchPassword'] == true
        "
      >
        * Les deux mots de passe ne sont pas identiques.
      </div>
    </div>
    <div class="row form-btn-layout">
      <button type="submit" class="btn btn-secondary">Confirmer</button>
    </div>
  </fieldset>
</form>
<aside class="aside-text-info">
  Vous n'avez pas reçu l'e-mail pour la réinitialisation de votre mot de passe ?
  <br />
  <a routerLink="/password-reset/init">Recevoir un nouvel e-mail</a>
</aside>
